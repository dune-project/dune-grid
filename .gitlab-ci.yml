---
before_script:
  - pushd /duneci/modules
  - ln -s /duneci/modules/dune-common/bin/dunecontrol /duneci/bin
  - git clone https://gitlab.dune-project.org/core/dune-common.git
  - git clone https://gitlab.dune-project.org/core/dune-geometry.git
  - dunecontrol --opts=/duneci/opts.gcc all
  - popd

debian:9--gcc:
  image: duneci/base:9
  script:
  - dunecontrol --current --opts=/duneci/opts.gcc all
  - dunecontrol --current make build_tests
  - cd build-cmake; duneci-ctest

debian:9--clang:
  image: duneci/base:9
  script:
  - dunecontrol --current --opts=/duneci/opts.clang all
  - dunecontrol --current make build_tests
  - cd build-cmake; duneci-ctest
